/*! For license information please see module.js.LICENSE.txt */
define(["react","@grafana/data","@grafana/ui","@grafana/runtime"],(function(e,t,r,n){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r(r.s=51)}([function(t,r){t.exports=e},function(e,r){e.exports=t},function(e,t){e.exports=r},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t){e.exports=n},function(e,t,r){var n=r(10),o=r(28),a=r(29),u=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":u&&u in Object(e)?o(e):a(e)}},function(e,t,r){var n=r(11),o="object"==typeof self&&self&&self.Object===Object&&self,a=n||o||Function("return this")();e.exports=a},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t){e.exports=function(e){return e}},function(e,t,r){var n=r(5),o=r(3);e.exports=function(e){if(!o(e))return!1;var t=n(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},function(e,t,r){var n=r(6).Symbol;e.exports=n},function(e,t,r){(function(t){var r="object"==typeof t&&t&&t.Object===Object&&t;e.exports=r}).call(this,r(27))},function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,r){var n=r(9),o=r(14);e.exports=function(e){return null!=e&&o(e.length)&&!n(e)}},function(e,t){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},function(e,t){var r=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&r.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){var n=r(18),o=r(12),a=r(35),u=r(36),i=Object.prototype,c=i.hasOwnProperty,s=n((function(e,t){e=Object(e);var r=-1,n=t.length,s=n>2?t[2]:void 0;for(s&&a(t[0],t[1],s)&&(n=1);++r<n;)for(var f=t[r],l=u(f),p=-1,v=l.length;++p<v;){var y=l[p],h=e[y];(void 0===h||o(h,i[y])&&!c.call(e,y))&&(e[y]=f[y])}return e}));e.exports=s},function(e,t,r){var n=r(8),o=r(19),a=r(21);e.exports=function(e,t){return a(o(e,t,n),e+"")}},function(e,t,r){var n=r(20),o=Math.max;e.exports=function(e,t,r){return t=o(void 0===t?e.length-1:t,0),function(){for(var a=arguments,u=-1,i=o(a.length-t,0),c=Array(i);++u<i;)c[u]=a[t+u];u=-1;for(var s=Array(t+1);++u<t;)s[u]=a[u];return s[t]=r(c),n(e,this,s)}}},function(e,t){e.exports=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}},function(e,t,r){var n=r(22),o=r(34)(n);e.exports=o},function(e,t,r){var n=r(23),o=r(24),a=r(8),u=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:a;e.exports=u},function(e,t){e.exports=function(e){return function(){return e}}},function(e,t,r){var n=r(25),o=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},function(e,t,r){var n=r(26),o=r(33);e.exports=function(e,t){var r=o(e,t);return n(r)?r:void 0}},function(e,t,r){var n=r(9),o=r(30),a=r(3),u=r(32),i=/^\[object .+?Constructor\]$/,c=Function.prototype,s=Object.prototype,f=c.toString,l=s.hasOwnProperty,p=RegExp("^"+f.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!a(e)||o(e))&&(n(e)?p:i).test(u(e))}},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){var n=r(10),o=Object.prototype,a=o.hasOwnProperty,u=o.toString,i=n?n.toStringTag:void 0;e.exports=function(e){var t=a.call(e,i),r=e[i];try{e[i]=void 0;var n=!0}catch(e){}var o=u.call(e);return n&&(t?e[i]=r:delete e[i]),o}},function(e,t){var r=Object.prototype.toString;e.exports=function(e){return r.call(e)}},function(e,t,r){var n,o=r(31),a=(n=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";e.exports=function(e){return!!a&&a in e}},function(e,t,r){var n=r(6)["__core-js_shared__"];e.exports=n},function(e,t){var r=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return r.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t){var r=Date.now;e.exports=function(e){var t=0,n=0;return function(){var o=r(),a=16-(o-n);if(n=o,a>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},function(e,t,r){var n=r(12),o=r(13),a=r(15),u=r(3);e.exports=function(e,t,r){if(!u(r))return!1;var i=typeof t;return!!("number"==i?o(r)&&a(t,r.length):"string"==i&&t in r)&&n(r[t],e)}},function(e,t,r){var n=r(37),o=r(48),a=r(13);e.exports=function(e){return a(e)?n(e,!0):o(e)}},function(e,t,r){var n=r(38),o=r(39),a=r(41),u=r(42),i=r(15),c=r(44),s=Object.prototype.hasOwnProperty;e.exports=function(e,t){var r=a(e),f=!r&&o(e),l=!r&&!f&&u(e),p=!r&&!f&&!l&&c(e),v=r||f||l||p,y=v?n(e.length,String):[],h=y.length;for(var b in e)!t&&!s.call(e,b)||v&&("length"==b||l&&("offset"==b||"parent"==b)||p&&("buffer"==b||"byteLength"==b||"byteOffset"==b)||i(b,h))||y.push(b);return y}},function(e,t){e.exports=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}},function(e,t,r){var n=r(40),o=r(7),a=Object.prototype,u=a.hasOwnProperty,i=a.propertyIsEnumerable,c=n(function(){return arguments}())?n:function(e){return o(e)&&u.call(e,"callee")&&!i.call(e,"callee")};e.exports=c},function(e,t,r){var n=r(5),o=r(7);e.exports=function(e){return o(e)&&"[object Arguments]"==n(e)}},function(e,t){var r=Array.isArray;e.exports=r},function(e,t,r){(function(e){var n=r(6),o=r(43),a=t&&!t.nodeType&&t,u=a&&"object"==typeof e&&e&&!e.nodeType&&e,i=u&&u.exports===a?n.Buffer:void 0,c=(i?i.isBuffer:void 0)||o;e.exports=c}).call(this,r(16)(e))},function(e,t){e.exports=function(){return!1}},function(e,t,r){var n=r(45),o=r(46),a=r(47),u=a&&a.isTypedArray,i=u?o(u):n;e.exports=i},function(e,t,r){var n=r(5),o=r(14),a=r(7),u={};u["[object Float32Array]"]=u["[object Float64Array]"]=u["[object Int8Array]"]=u["[object Int16Array]"]=u["[object Int32Array]"]=u["[object Uint8Array]"]=u["[object Uint8ClampedArray]"]=u["[object Uint16Array]"]=u["[object Uint32Array]"]=!0,u["[object Arguments]"]=u["[object Array]"]=u["[object ArrayBuffer]"]=u["[object Boolean]"]=u["[object DataView]"]=u["[object Date]"]=u["[object Error]"]=u["[object Function]"]=u["[object Map]"]=u["[object Number]"]=u["[object Object]"]=u["[object RegExp]"]=u["[object Set]"]=u["[object String]"]=u["[object WeakMap]"]=!1,e.exports=function(e){return a(e)&&o(e.length)&&!!u[n(e)]}},function(e,t){e.exports=function(e){return function(t){return e(t)}}},function(e,t,r){(function(e){var n=r(11),o=t&&!t.nodeType&&t,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,u=a&&a.exports===o&&n.process,i=function(){try{var e=a&&a.require&&a.require("util").types;return e||u&&u.binding&&u.binding("util")}catch(e){}}();e.exports=i}).call(this,r(16)(e))},function(e,t,r){var n=r(3),o=r(49),a=r(50),u=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return a(e);var t=o(e),r=[];for(var i in e)("constructor"!=i||!t&&u.call(e,i))&&r.push(i);return r}},function(e,t){var r=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}},function(e,t){e.exports=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}},function(e,t,r){"use strict";r.r(t);var n=r(1),o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function a(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var u=function(){return(u=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function i(e,t,r,n){return new(r||(r=Promise))((function(o,a){function u(e){try{c(n.next(e))}catch(e){a(e)}}function i(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(u,i)}c((n=n.apply(e,t||[])).next())}))}function c(e,t){var r,n,o,a,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return u.label++,{value:a[1],done:!1};case 5:u.label++,n=a[1],a=[0];continue;case 7:a=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){u=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){u.label=a[1];break}if(6===a[0]&&u.label<o[1]){u.label=o[1],o=a;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(a);break}o[2]&&u.ops.pop(),u.trys.pop();continue}a=t.call(e,u)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}}var s=r(4),f=/\$(\w+)|\[\[([\s\S]+?)(?::(\w+))?\]\]|\${(\w+)(?:\.([^:^\}]+))?(?::([^\}]+))?}/g;function l(e,t,r){var n=function(e,t){return Array.from(e.matchAll(f)).map((function(e){for(var r,n=e[0],o=1;o<e.length&&!(r=e[o]);o++);var a=t.find((function(e){return e.name===r}));if(a&&a.multi){var u=a.current.value||[];return u=Array.isArray(u)?u:[u],{fullName:n,name:r,value:u}}return{fullName:n,name:r}}))}(e,r),o=[];if((n=n.filter((function(e){return!!e.value}))).length<=0)return console.warn("No variables to expand. If this is unusual, make sure your variables are set to multi-value."),"";for(var a=0;a<n[0].value.length;a++){for(var u=e,i=0;i<n.length;i++)u=u.replaceAll(n[i].fullName,n[i].value[a]);o.push(u)}return o.join(t)}function p(e,t,r,n){var o=function(e,t){for(var r=t+"(",n=0,o=e.indexOf(r,n),a=[];-1!==o;){for(var u=[],i=o+r.length,c=i;c<e.length;c++){var s=e.charAt(c);if("("===s)u.push(s);else if(")"===s){if(!u.length){a.push({start:o,end:c,template:e.substring(i,c).trim()}),n=c;break}u.pop()}}o=e.indexOf(r,n)}return a}(e,t);return o.length&&(e=o.reduce((function(e,t){var o=l(t.template,r,n);return e.substring(0,t.start)+o+e.substring(t.end+1)}),e)),e}function v(e){var t={__range:"RANGE("+e.range.from.utc().format("YYYY-MM-DD[T]HH:mm:ss.SSSSSSSSS")+", "+e.range.to.utc().format("YYYY-MM-DD[T]HH:mm:ss.SSSSSSSSS")+")",__interval:e.intervalMs+"ms",__sensor:["asd","bsd"]};return u(u({},e.scopedVars),Object.keys(t).map((function(e){var r;return(r={})[e]={text:t[e],value:t[e]},r})).reduce((function(e,t){return u(u({},t),e)}),{}))}var y=function(e){function t(t){var r=e.call(this,t)||this;return r.templateSrv=Object(s.getTemplateSrv)(),r}return a(t,e),t.prototype.query=function(t){var r=this;return!0===t.targets[0].tagQuery||(t.targets.map((function(e){var n,o,a;return e.queryText=r.templateSrv.replace((o=null!==(n=e.queryText)&&void 0!==n?n:"",a=r.templateSrv.getVariables(),o=p(o,"$__comma",", ",a),o=p(o,"$__or"," OR ",a),o=p(o,"$__and"," AND ",a)),v(t))})),t.targets.map((function(e){var n;return e.queryText=r.templateSrv.replace(null!==(n=e.queryText)&&void 0!==n?n:"",v(t))}))),e.prototype.query.call(this,t)},t.prototype.metricFindQuery=function(e,t){return i(this,void 0,Promise,(function(){var r,o;return c(this,(function(a){switch(a.label){case 0:return r={refId:t.id,queryText:e,tagQuery:!0},o={requestId:t.id,interval:"5m",intervalMs:3e4,range:n.DefaultTimeRange,scopedVars:t,timezone:n.DefaultTimeZone,app:"",startTime:0,targets:[r]},[4,this.query(o)];case 1:return[2,a.sent().toPromise().then((function(e){var t=[],r=e.data[0].fields[0];if(r)for(var n=0;n<r.values.length;n++)t.push({text:""+r.values.get(n)});return t}))]}}))}))},t}(s.DataSourceWithBackend),h=r(0),b=r.n(h),d=r(2),g=d.LegacyForms.SecretFormField,m=d.LegacyForms.FormField,x=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onHostChange=function(e){var r=t.props,n=r.onOptionsChange,o=r.options,a=u(u({},o.jsonData),{host:e.target.value});n(u(u({},o),{jsonData:a}))},t.onUsernameChange=function(e){var r=t.props,n=r.onOptionsChange,o=r.options;n(u(u({},o),{secureJsonData:u(u({},o.secureJsonData),{user:e.target.value})}))},t.onUserPrivateKeyChange=function(e){var r=t.props,n=r.onOptionsChange,o=r.options;n(u(u({},o),{secureJsonData:u(u({},o.secureJsonData),{secret:e.target.value})}))},t.onResetUsername=function(){var e=t.props,r=e.onOptionsChange,n=e.options;r(u(u({},n),{secureJsonFields:u(u({},n.secureJsonFields),{user:!1}),secureJsonData:u(u({},n.secureJsonData),{user:""})}))},t.onResetUserPrivateKey=function(){var e=t.props,r=e.onOptionsChange,n=e.options;r(u(u({},n),{secureJsonFields:u(u({},n.secureJsonFields),{secret:!1}),secureJsonData:u(u({},n.secureJsonData),{secret:""})}))},t}return a(t,e),t.prototype.render=function(){var e=this.props.options,t=e.jsonData,r=e.secureJsonFields,n=e.secureJsonData||{};return b.a.createElement("div",{className:"gf-form-group"},b.a.createElement("div",{className:"gf-form"},b.a.createElement(m,{label:"Host",labelWidth:6,inputWidth:20,onChange:this.onHostChange,value:t.host||"",placeholder:"Quasardb REST API URL"})),b.a.createElement("div",{className:"gf-form"},b.a.createElement(g,{isConfigured:r&&r.user,label:"Username",labelWidth:6,inputWidth:20,onChange:this.onUsernameChange,value:n.user||"",onReset:this.onResetUsername,placeholder:"User"})),b.a.createElement("div",{className:"gf-form-inline"},b.a.createElement("div",{className:"gf-form"},b.a.createElement(g,{isConfigured:r&&r.secret,value:n.secret||"",label:"User Key",placeholder:"User Key",labelWidth:6,inputWidth:20,onReset:this.onResetUserPrivateKey,onChange:this.onUserPrivateKeyChange}))))},t}(h.PureComponent),j=r(17),O=r.n(j),S={},w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onQueryTextChange=function(e){var r=t.props,n=r.onChange,o=r.query;n(u(u({},o),{queryText:e.target.value}))},t}return a(t,e),t.prototype.render=function(){var e=O()(this.props.query,S).queryText;return b.a.createElement("div",{className:"gf-form"},b.a.createElement(d.TextArea,{label:"Query",value:e||"",onChange:this.onQueryTextChange}),b.a.createElement(d.Button,{onClick:this.props.onRunQuery},"Run Query"))},t}(h.PureComponent);r.d(t,"plugin",(function(){return P}));var P=new n.DataSourcePlugin(y).setConfigEditor(x).setQueryEditor(w)}])}));
//# sourceMappingURL=module.js.map